<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Study & Programming Tracker (Monâ€“Fri)</title>
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon-192.png">
<style>
body {
  font-family: Arial, sans-serif;
  background: linear-gradient(135deg, #FFDEE9, #B5FFFC);
  padding: 10px;
  margin:0;
}
h1 { text-align:center; margin-bottom:20px; }
.progress-container, .day-progress-container {
  margin: 10px 0;
  background: #ddd;
  border-radius: 20px;
  overflow: hidden;
  position: relative;
}
.progress-bar, .day-progress-bar {
  height: 20px;
  width: 0%;
  background: #2196F3;
  text-align:center;
  color:white;
  line-height:20px;
  font-weight:bold;
  border-radius:20px;
  transition: width 0.3s;
}
.day-progress-bar { height:15px; font-size:12px; line-height:15px; }
.task { background:#fff; margin:5px 0; padding:10px; border-radius:50px; cursor:pointer; display:flex; justify-content:space-between; align-items:center; transition: transform 0.2s; }
.task:hover { transform: scale(1.03); }
.morning-container { display:flex; justify-content:space-between; align-items:flex-start; margin-top:5px; }
.morning-subtasks { display:flex; flex-direction:column; font-size:14px; }
.task input[type='checkbox'] { width:20px; height:20px; }
canvas { max-width:150px; max-height:150px; }
#start-sound { display:block; margin:15px auto; padding:10px 20px; font-size:16px; border-radius:25px; background:#FFAFBD; border:none; cursor:pointer; }
.day-notes { margin-top:10px; }
.note-text { width:100%; min-height:60px; padding:10px; border-radius:15px; border:1px solid #ccc; resize: vertical; font-size:14px; }
</style>
</head>
<body>

<h1>Study & Programming Tracker (Monâ€“Fri)</h1>

<div class="progress-container">
  <div class="progress-bar" id="weekly-progress">0%</div>
</div>

<button id="start-sound">Start Hourly Voice Reminder</button>
<audio id="my-sound" src="your-voice.mp3" preload="auto"></audio>
<div class="days-container"></div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<script>
const daysData = ['mon','tue','wed','thu','fri'];
const dayNames = ['Monday','Tuesday','Wednesday','Thursday','Friday'];
const container = document.querySelector('.days-container');
const morningCharts = {};

daysData.forEach((day, index) => {
  const dayDiv = document.createElement('div');
  dayDiv.className='day';
  dayDiv.dataset.day = day;
  dayDiv.innerHTML = `
  <div class="day-title">${dayNames[index]}</div>
  <div class="day-progress-container">
    <div class="day-progress-bar" id="progress-${day}">0%</div>
  </div>
  <div class="task morning">
    <span class="morning-title">ğŸŒ Morning Routine (6:00â€“8:00)</span>
    <div class="morning-container" style="display:none;">
      <div class="morning-subtasks">
        <label><input type="checkbox" class="morning-checkbox"> Drink Water</label>
        <label><input type="checkbox" class="morning-checkbox"> Prayer / Meditation</label>
        <label><input type="checkbox" class="morning-checkbox"> Visualization</label>
        <label><input type="checkbox" class="morning-checkbox"> Exercise / Stretch</label>
        <label><input type="checkbox" class="morning-checkbox"> Healthy Breakfast</label>
        <label><input type="checkbox" class="morning-checkbox"> Reading / Learning</label>
        <label><input type="checkbox" class="morning-checkbox"> Journaling</label>
      </div>
      <canvas id="morningChart-${day}"></canvas>
    </div>
  </div>
  <div class="task">8:00â€“12:00 ğŸ’» Programming / HackYourFuture Prep <input type="checkbox" class="task-checkbox"></div>
  <div class="task">12:00â€“16:30 ğŸ‡³ğŸ‡± Dutch Course <input type="checkbox" class="task-checkbox"></div>
  <div class="task">16:30â€“17:30 ğŸ’» Review & Light Coding <input type="checkbox" class="task-checkbox"></div>
  <div class="day-notes">
    <label for="note-${day}">ğŸ“ Notes / Reason:</label>
    <textarea id="note-${day}" class="note-text" placeholder="Enter your notes here..."></textarea>
  </div>
  `;
  container.appendChild(dayDiv);
});

// Toggle morning routine display
document.addEventListener('click', function(e){
  if(e.target.classList.contains('morning-title')){
    const container = e.target.nextElementSibling;
    container.style.display = container.style.display==='none'?'flex':'none';
  }
});

// Save/load state
function saveState(){
  document.querySelectorAll('.morning-checkbox, .task-checkbox').forEach(cb=>{
    const id = cb.closest('.day').dataset.day + '-' + cb.parentElement.innerText.trim();
    localStorage.setItem(id, cb.checked);
  });
}
function loadState(){
  document.querySelectorAll('.morning-checkbox, .task-checkbox').forEach(cb=>{
    const id = cb.closest('.day').dataset.day + '-' + cb.parentElement.innerText.trim();
    const saved = localStorage.getItem(id);
    if(saved==='true') cb.checked=true;
  });
}

// Save/load notes
document.querySelectorAll('.note-text').forEach(note => {
  note.addEventListener('input', e => {
    const day = note.closest('.day').dataset.day;
    localStorage.setItem('note-' + day, note.value);
  });
});
document.querySelectorAll('.note-text').forEach(note => {
  const day = note.closest('.day').dataset.day;
  const saved = localStorage.getItem('note-' + day);
  if(saved) note.value = saved;
});

// Initialize charts for each day
document.querySelectorAll('.day').forEach(day => {
  const ctx = day.querySelector('canvas').getContext('2d');
  morningCharts[day.dataset.day] = new Chart(ctx,{
    type:'doughnut',
    data:{labels:['Completed','Remaining'],datasets:[{data:[0,7], backgroundColor:['#4CAF50','#ddd'], borderWidth:1}]},
    options:{
      responsive:true,
      plugins:{
        legend:{display:true,position:'bottom'},
        datalabels:{
          formatter: (value, ctx)=>{
            const total=ctx.chart.data.datasets[0].data.reduce((a,b)=>a+b,0);
            return ctx.dataIndex===0?Math.round((value/total)*100)+'%':'';
          },
          color:'#fff',
          font:{weight:'bold', size:14}
        },
        title:{display:true,text:'Morning Progress',font:{size:14}}
      }
    },
    plugins:[ChartDataLabels]
  });
});

// Update morning chart and daily/weekly progress
function updateMorningChart(day){
  const chart = morningCharts[day.dataset.day];
  const checkboxes = day.querySelectorAll('.morning-checkbox');
  const completed = Array.from(checkboxes).filter(cb=>cb.checked).length;
  const total = checkboxes.length;
  chart.data.datasets[0].data=[completed,total-completed];
  chart.update();
  return completed/total;
}
function updateProgress(){
  const days = document.querySelectorAll('.day');
  let totalTasks=0,totalCompleted=0;
  days.forEach(day=>{
    const morningFraction = updateMorningChart(day);
    const morningWeight = 1;
    const morningCompleted = morningFraction*morningWeight;
    const otherTasks = day.querySelectorAll('.task-checkbox');
    const totalDayTasks = morningWeight + otherTasks.length;
    const completedDayTasks = morningCompleted + Array.from(otherTasks).filter(cb=>cb.checked).length;
    const dailyPercent = Math.round((completedDayTasks/totalDayTasks)*100);
    const dailyBar = day.querySelector('.day-progress-bar');
    dailyBar.style.width=dailyPercent+'%';
    dailyBar.innerText=`${dailyPercent}% (Goal: 80%)`;
    dailyBar.style.background=dailyPercent>=80?'#4CAF50':'#2196F3';
    totalTasks+=totalDayTasks;
    totalCompleted+=completedDayTasks;
  });
  const weeklyPercent=Math.round((totalCompleted/totalTasks)*100);
  const weeklyBar=document.getElementById('weekly-progress');
  weeklyBar.style.width=weeklyPercent+'%';
  weeklyBar.innerText=`${weeklyPercent}% (Goal: 90%)`;
  weeklyBar.style.background=weeklyPercent>=90?'#4CAF50':'#2196F3';
}

// Checkbox events
document.addEventListener('change', e=>{
  if(e.target.classList.contains('morning-checkbox')||e.target.classList.contains('task-checkbox')){
    saveState();
    updateProgress();
  }
});

// Initialize
loadState();
updateProgress();

// Hourly voice reminder
const audio=document.getElementById('my-sound');
const button=document.getElementById('start-sound');
let timer;
button.addEventListener('click',()=>{
  audio.play().catch(e=>console.log(e));
  timer=setInterval(()=>{audio.play().catch(e=>console.log(e));},3600000);
  alert('Hourly voice reminders started!');
});

if("serviceWorker" in navigator){
  navigator.serviceWorker.register("service-worker.js");
}
</script>
</body>
</html>

