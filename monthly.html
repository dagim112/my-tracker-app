<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Monthly Tracker</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
body{font-family:Arial,sans-serif;margin:0;padding:14px;background:#000;color:#fff;}
h1{text-align:center;color:#0f4d0f;margin-bottom:16px;}
.wrapper{max-width:700px;margin:0 auto;padding:12px;border-radius:12px;border:1px solid #0f4d0f;}
.day-summary{margin:10px 0;padding:10px;background:#111;border-radius:12px;border:1px solid #0f4d0f;}
.day-summary h2{margin:0 0 6px 0;color:#0f4d0f;}
.day-summary .progress{background:#222;height:24px;border-radius:12px;overflow:hidden;text-align:center;color:#fff;font-weight:700;}
canvas{max-width:250px;max-height:250px;margin:20px auto;display:block;}
</style>
</head>
<body>

<h1>Monthly Overview</h1>

<div class="wrapper">
  <!-- Weekly summaries -->
</div>

<h2 style="text-align:center;margin-top:24px;">Monthly Completion Pie</h2>
<canvas id="monthly-chart"></canvas>

<script>
// ---------------- DAYS ----------------
const days = ['mon','tue','wed','thu','fri','sat','sun'];
const dayNames = ['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'];
const wrapper = document.querySelector('.wrapper');

// ---------------- LOAD DAILY PROGRESS ----------------
function getDayProgress(day){
  // Count all checkboxes for that day
  let total = 0, done = 0;
  for(let i=0;i<50;i++){ // max 50 checkboxes per day
    const val = localStorage.getItem(`${day}-${i}`);
    if(val===null) break;
    total++;
    if(val==='true') done++;
  }
  const pct = total?Math.round(done/total*100):0;
  return pct;
}

// ---------------- BUILD WEEKLY SUMMARIES ----------------
let monthlyTotal=0, monthlyDone=0;
days.forEach((day,idx)=>{
  const pct = getDayProgress(day);
  monthlyTotal+=100;
  monthlyDone+=pct;

  const dayDiv = document.createElement('div');
  dayDiv.className = 'day-summary';
  dayDiv.innerHTML = `
    <h2>${dayNames[idx]}</h2>
    <div class="progress" style="width:${pct}%">${pct}%</div>
  `;
  wrapper.appendChild(dayDiv);
});

// ---------------- MONTHLY PIE ----------------
const monthlyPct = Math.round(monthlyDone/days.length);
const ctx = document.getElementById('monthly-chart').getContext('2d');
new Chart(ctx,{
  type:'doughnut',
  data:{
    labels:['Completed','Remaining'],
    datasets:[{data:[monthlyPct,100-monthlyPct],backgroundColor:['#0f4d0f','#555'] }]
  },
  options:{plugins:{legend:{display:true,labels:{color:'#fff'}}}}
});
</script>

</body>
</html>
